<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Manage Tabs - Auto Group, Sort and Clean</title>
    <link rel="stylesheet" href="popup.css" />
  </head>
  <body class="window">
    <header class="toolbar">
      <div class="toolbar-row">
        <button class="target-window" id="targetWindowLabel" type="button"></button>
        <div class="actions-header">
          <button
            id="undoAction"
            class="undo undo-icon-btn"
            type="button"
            title="Undo"
            aria-label="Undo"
            disabled
          >
            <svg class="btn-icon" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M12 4a8 8 0 1 1-5.66 13.66l1.41-1.41A6 6 0 1 0 12 6H7.83l2.58 2.59L9 10 4 5l5-5 1.41 1.41L7.83 4H12z" />
            </svg>
          </button>
          <button
            id="stopAction"
            class="stop stop-icon-btn"
            type="button"
            title="Stop"
            aria-label="Stop"
            disabled
          >
            <svg class="btn-icon" viewBox="0 0 24 24" aria-hidden="true">
              <path d="M7 7h10v10H7z" />
            </svg>
          </button>
        </div>
      </div>
      <div class="action-zones">
        <section class="seg-row">
          <div class="seg-label">Sorting</div>
          <div class="seg-group seg-group-sorting">
            <button id="closeDuplicates" class="seg-btn">
              <svg class="btn-icon" viewBox="0 0 24 24" aria-hidden="true">
                <path d="M7 3h10a2 2 0 0 1 2 2v10h-2V5H7V3z" />
                <path d="M5 7h10a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2zm2.7 3.3L10 12.6l2.3-2.3 1.4 1.4-2.3 2.3 2.3 2.3-1.4 1.4-2.3-2.3-2.3 2.3-1.4-1.4 2.3-2.3-2.3-2.3 1.4-1.4z" />
              </svg>
              <span>Close duplicates</span>
            </button>
            <button id="sortAlpha" class="seg-btn">
              <svg class="btn-icon" viewBox="0 0 24 24" aria-hidden="true">
                <path d="M6 3l4 5H7v13H5V8H2l4-5zm6 3h8v2h-8V6zm0 5h6v2h-6v-2zm0 5h4v2h-4v-2z" />
              </svg>
              <span>Sort Aâ€“Z</span>
            </button>
            <button id="sortLastVisited" class="seg-btn">
              <svg class="btn-icon" viewBox="0 0 24 24" aria-hidden="true">
                <path d="M12 2a10 10 0 1 1 0 20 10 10 0 0 1 0-20zm1 5h-2v6l5 3 1-1.7-4-2.3V7z" />
              </svg>
              <span>Sort by last visited</span>
            </button>
          </div>
        </section>
        <section class="seg-row">
          <div class="seg-label">Grouping</div>
          <div class="seg-group seg-group-grouping">
            <button id="groupDomain" class="seg-btn">
              <svg class="btn-icon btn-icon-stroke" viewBox="0 0 24 24" aria-hidden="true">
                <circle cx="12" cy="12" r="9" />
                <path d="M3 12h18" />
                <path d="M12 3c3.2 2.8 3.2 15.2 0 18" />
                <path d="M12 3c-3.2 2.8-3.2 15.2 0 18" />
              </svg>
              <span>Group by domain</span>
            </button>
            <button id="groupTopic" class="seg-btn">
              <svg class="btn-icon" viewBox="0 0 24 24" aria-hidden="true">
                <path d="M7 5a3 3 0 1 1 0 6 3 3 0 0 1 0-6zm10 0a3 3 0 1 1 0 6 3 3 0 0 1 0-6zM12 13a3 3 0 1 1 0 6 3 3 0 0 1 0-6z" />
                <path d="M9.6 9.4l2.4 4.5 2.4-4.5 1.8 1-2.7 5.1h-3l-2.7-5.1 1.8-1z" />
              </svg>
              <span>Group by topic</span>
            </button>
          </div>
        </section>
        <section class="seg-row">
          <div class="seg-label">Group controls</div>
          <div class="seg-group seg-group-controls">
            <button id="collapseGroups" class="seg-btn seg-btn-ghost">
              <svg class="btn-icon" viewBox="0 0 24 24" aria-hidden="true">
                <path d="M4 4h16a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2zm0 9h16a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2z" />
                <path d="M8 16h8v2H8z" />
              </svg>
              <span>Collapse groups</span>
            </button>
            <button id="expandGroups" class="seg-btn seg-btn-ghost">
              <svg class="btn-icon" viewBox="0 0 24 24" aria-hidden="true">
                <path d="M4 4h16a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2zm0 9h16a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2z" />
                <path d="M11 15h2v4h-2zM9 17h6v2H9z" />
              </svg>
              <span>Expand groups</span>
            </button>
            <button id="ungroupAll" class="seg-btn seg-btn-ghost">
              <svg class="btn-icon" viewBox="0 0 24 24" aria-hidden="true">
                <path d="M3 3h7v7H3V3zm11 0h7v7h-7V3zM3 14h7v7H3v-7zm11 0h7v7h-7v-7z" />
              </svg>
              <span>Ungroup all</span>
            </button>
          </div>
        </section>
      </div>
    </header>

    <button
      id="configToggle"
      class="config-toggle-btn"
      type="button"
      title="Configuration"
      aria-label="Configuration"
      aria-expanded="false"
    >
      <svg class="btn-icon icon-gear" viewBox="0 0 24 24" aria-hidden="true">
        <path d="M19.43 12.98a7.98 7.98 0 0 0 .05-.98 7.98 7.98 0 0 0-.05-.98l2.11-1.65a.5.5 0 0 0 .12-.64l-2-3.46a.5.5 0 0 0-.6-.22l-2.49 1a7.9 7.9 0 0 0-1.7-.98l-.38-2.65a.5.5 0 0 0-.49-.42h-4a.5.5 0 0 0-.49.42l-.38 2.65c-.61.24-1.18.57-1.7.98l-2.49-1a.5.5 0 0 0-.6.22l-2 3.46a.5.5 0 0 0 .12.64l2.11 1.65a7.98 7.98 0 0 0-.05.98c0 .33.02.66.05.98l-2.11 1.65a.5.5 0 0 0-.12.64l2 3.46a.5.5 0 0 0 .6.22l2.49-1c.52.41 1.09.74 1.7.98l.38 2.65a.5.5 0 0 0 .49.42h4a.5.5 0 0 0 .49-.42l.38-2.65c.61-.24 1.18-.57 1.7-.98l2.49 1a.5.5 0 0 0 .6-.22l2-3.46a.5.5 0 0 0-.12-.64l-2.11-1.65zM12 15.5A3.5 3.5 0 1 1 12 8a3.5 3.5 0 0 1 0 7.5z" />
      </svg>
      <svg class="btn-icon icon-close" viewBox="0 0 24 24" aria-hidden="true">
        <path d="M6 6l12 12M18 6L6 18" class="btn-icon-stroke" />
      </svg>
    </button>
    <button id="resetSettings" class="config-reset config-reset-top" type="button">
      Reset to defaults
    </button>

    <section id="configOverlay" class="config-overlay" hidden>
      <div class="config-overlay-card">
        <div class="config-overlay-header">
          <div class="config-overlay-title">Configuration</div>
          <p class="config-overlay-subtitle">Adjust grouping and sorting behavior for this window.</p>
        </div>
        <div class="config-list">
          <div class="config-stack">
            <label class="config-field config-check">
              <input type="checkbox" id="nameGroups" checked />
              <span>Name created tab groups (domain/topic)</span>
            </label>
          </div>
          <div class="config-stack">
            <label class="config-field config-check">
              <input type="checkbox" id="collapseAfterGroup" />
              <span>Collapse groups immediately after creating them</span>
            </label>
          </div>
          <div class="config-stack">
            <label class="config-field">
              <span>Color for newly created groups</span>
              <select id="groupColor">
                <option value="" selected>Auto (browser chooses)</option>
                <option value="blue">Blue</option>
                <option value="red">Red</option>
                <option value="yellow">Yellow</option>
                <option value="green">Green</option>
                <option value="pink">Pink</option>
                <option value="purple">Purple</option>
                <option value="cyan">Cyan</option>
                <option value="orange">Orange</option>
                <option value="grey">Grey</option>
              </select>
            </label>
          </div>
          <div class="config-stack">
            <label class="config-field config-check">
              <input type="checkbox" id="includePinnedTabs" />
              <span>Include pinned tabs in actions</span>
            </label>
          </div>
          <div class="config-stack">
            <label class="config-field">
              <span>Sort by last visited: tab order</span>
              <select id="lastVisitedOrder">
                <option value="desc" selected>Newest first</option>
                <option value="asc">Oldest first</option>
              </select>
            </label>
          </div>
          <div class="config-stack config-stack-wide">
            <label class="config-field">
              <span>Group by topic: sensitivity</span>
              <select id="topicSensitivity">
                <option value="low">Low</option>
                <option value="medium" selected>Medium</option>
                <option value="high">High</option>
              </select>
            </label>
            <p class="config-help">Low groups more broadly, High groups more strictly.</p>
          </div>
          <div class="config-stack config-stack-wide">
            <label class="config-field config-check">
              <input type="checkbox" id="activateTabsForContent" />
              <span>Group by topic: activate tabs for content scan</span>
            </label>
            <p class="config-help">Improves grouping quality, but can momentarily switch visible tabs while scanning.</p>
          </div>
        </div>
      </div>
    </section>

    <section class="status-panel" aria-live="polite">
      <div class="status-line">
        <div id="statusMessage" class="status-text" role="status"></div>
        <div class="status-duration" aria-label="Duration">
          <svg class="status-duration-icon" viewBox="0 0 24 24" aria-hidden="true">
            <path d="M12 7v5l3 2" />
            <circle cx="12" cy="12" r="8" />
          </svg>
          <span id="statusDurationValue">0s</span>
        </div>
      </div>
      <div class="status-progress-row">
        <div class="status-progress">
          <div id="statusProgressBar" class="status-progress-bar"></div>
        </div>
      </div>
    </section>
    <footer class="footer-disclaimer">
      <div>
        This extension is provided "as is" without warranty. Use at your own risk.
      </div>
      <div class="footer-links">
        <a class="privacy-link" id="copyDebugReportLink" href="#">Copy debug report</a>
        <a class="privacy-link" href="https://shurkantwo.github.io/chromium-tab-sorter-cleaner/" target="_blank" rel="noreferrer">
          Privacy page
        </a>
      </div>
    </footer>

    <script type="module" src="popup.js"></script>
  </body>
</html>
